# 2025-05-28 開發日誌：使用者個人資料編輯與預設頭像設定

## ✅ 今日進度紀錄

### 1️⃣ **新增個人資料編輯功能**
- 建立 `EditProfileForm`，可修改暱稱與上傳頭像。
- 新增路由 `/edit`，限制登入後才能編輯資料。
- 預設值只在 `GET` 請求時設定，避免覆蓋 `POST` 輸入內容。
- 上傳頭像檔案會依照使用者 `ID` 命名為 `user_<id>.jpg/png`。
- 使用 `secure_filename()` 確保安全命名；`os.makedirs()` 確保目錄存在。

### 2️⃣ **處理預設頭像**
- 補上 `default.jpg`，避免使用者尚未上傳頭像時產生 `404`。
- 圖片放置路徑：`static/uploads/avatars/default.jpg`
- 前端 HTML 使用 `fallback` 判斷：若無頭像則使用 `default.jpg`。

### 3️⃣ **樣式整合**
- 匯入 `profile.css` 供編輯頁使用。
- 表單簡潔直觀，包含 **暱稱欄位** 與 **圖片上傳欄位**。

---

## 🧠 開發心得 / 遇到的挑戰
1. **預設頭像的處理**  
   - 發現如果沒有 `default.jpg`，伺服器會回傳 `404`，影響使用者體驗。  
   - 手動產出預設圖片，並確保部署時包含該檔案。

2. **使用者上傳頭像的處理流程**  
   - 注意 **檔案副檔名過濾** (`FileAllowed`) 以確保安全性。  
   - 處理 **使用者目錄命名與檔名衝突問題**，避免覆蓋其他使用者檔案。

